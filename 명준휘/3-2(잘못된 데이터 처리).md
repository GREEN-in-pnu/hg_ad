# 잘못된 데이터 수정하기

데이터에 비어있는 값이 많거나, 정수값이 돼야 하는데 그렇지 않은 등의 예측하지 못한 경우가 많음  
→ 모든 행과 열을 꼼꼼히 확인해야 함

---

## `info()` : 데이터프레임 요약 정보 확인

`info()`는 데이터프레임의 각 열의 통계를 요약해서 보여줌  
- 전체 행 개수  
- 열 개수  
- 열의 데이터 타입  
- 비어있지 않은 행의 개수  
- 사용하는 데이터 타입  
- 메모리 사용량 등  

### 누락된 값 확인

- 누락된 행의 열 값만 추출할 수 있음  
- `isna()`는 NaN이면 `True`, 아니면 `False`  
- `sum()`을 연이어 호출하면 각 열의 NaN 개수를 출력함

```python
데이터.isna().sum()
```

## `NaN` (결측값)
pandas에서 사용되는 특수한 데이터 타입

저장될 때는 특수한 float형으로 저장됨 (실제 객체가 존재하는 것은 아님)

```python
# 숫자형 열에 NaN 넣기
data.loc[0, '값이 0이면 NaN으로 바꾸고 싶은 열(숫자형)'] = None

# 문자형 열에 NaN 넣기 (numpy 사용)
import numpy as np
data.loc[0, '값이 0이면 NaN으로 바꾸고 싶은 열(문자형)'] = np.nan
```

## fillna() : NaN값을 다른 값으로 채우기
모든 열에 대해 채우기

특정 열에 대해서만 채우기

딕셔너리 형태로 여러 열에 대해 지정 가능
```python
데이터.fillna('다른 값')
데이터['특정 열'].fillna('다른 값')
데이터.fillna({'특정 열': '다른 값'})
```
## replace() : 특정 값을 다른 값으로 바꾸기
리스트, 딕셔너리 형태로 변환 가능

열 지정도 가능

```python
# 리스트로 대체
데이터.replace(['원본1'], ['바꾸려는1'])

# 딕셔너리로 대체
데이터.replace({'원본1': '바꾸려는1'})

# 특정 열만 지정
데이터.replace({'열': '원본값'}, '바꾸려는 값')

# 특정 열 + 여러 값
데이터.replace({'열1': {'원본값': '바꾸려는 값'}})
```

## 정규 표현식 사용하기
예: 2021 → 21로 바꾸기
```python
# 두 자리 숫자 그룹 추출
데이터.replace({'정규 표현하고 싶은 열': {r'\d{2}(\d{2})': r'\1'}}, regex=True)

# 더 복잡한 예시
데이터.replace(
    {
        '열': {
            r'(.*)\s\(지은이\((.*)\s\(옮긴이\)': r'\1\2'
        }
    }, 
    regex=True
)
```

## contains() : 문자열 포함 여부 확인
str 속성을 통해 문자열 메서드 사용 가능

contains()는 정규 표현식도 가능

\D : 숫자가 아닌 문자

\d : 숫자

```python
# 숫자가 아닌 값을 가진 행 찾기
invalid_number = 데이터['특정 열'].str.contains('\D', na=True)
데이터[invalid_number]

# 정규 표현식으로 변환
데이터.replace({'특정 열': '.*(\d{4}).*'}, r'\1', regex=True)
```
